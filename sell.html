<form id="sellForm" enctype="multipart/form-data">
  <input type="text" id="pname" placeholder="Product Name" required>
  <input type="number" id="price" placeholder="Price" required>
  <input type="file" id="image" accept="image/*" required>
  <button type="submit">Upload Item</button>
</form>
<script type="module">
import { db, storage } from "./script/firebase.js";
import { collection, addDoc } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js";
import { ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-storage.js";

document.getElementById("sellForm").addEventListener("submit", async (e)=>{
    e.preventDefault();

    let name = document.getElementById("pname").value;
    let price = document.getElementById("price").value;
    let imageFile = document.getElementById("image").files[0];

    let imgRef = ref(storage, "products/" + imageFile.name);
    await uploadBytes(imgRef, imageFile);
    let imgURL = await getDownloadURL(imgRef);

    await addDoc(collection(db, "products"), {
      name,
      price,
      image: imgURL
    });

    alert("Product uploaded!");
});
</script>
